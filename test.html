<html>
    <script src="/rullerjs.js"></script>
    <script>
        input = {customerid: "123"}
        r = new RullerJS("http://127.0.0.1:8080/rules/domains", 
            input, 
            0, 
            (output) => {
                console.log("OUTPUT CHANGED: " + JSON.stringify(output))
                document.getElementById("status").innerText = JSON.stringify(output)
            }, (err) => {
                console.log("ERROR: " + err)
            });
        console.log(">>> startMonitoring ws")
        r.startMonitoring("ws://127.0.0.1:8080/ws")
        setTimeout(() => {

            console.log(">>> stopMonitoring ws")
            r.stopMonitoring()
            setTimeout(() => {

                console.log(">>> startPolling")
                r.startPolling(1000)
                setTimeout(() => {

                    console.log(">>> stopPolling")
                    r.stopPolling()
                    setTimeout(() => {
                        
                        console.log(">>> CRAZY CALLS!")
                        r.startPolling(1000)
                        r.startMonitoring("ws://127.0.0.1:8080/ws")
                        r.startPolling(1000)
                        r.startPolling(1000)
                        r.startPolling(1000)
                        r.startMonitoring("ws://127.0.0.1:8080/ws")
                        r.startMonitoring("ws://127.0.0.1:8080/ws")
                        r.startMonitoring("ws://127.0.0.1:8080/ws")
                        r.startMonitoring("ws://127.0.0.1:8080/ws")
                        r.startPolling(1000)
                        r.startPolling(1000)
                        r.startPolling(1000)
                        r.startPolling(1000)
                        r.startMonitoring("ws://127.0.0.1:8080/ws")
                    }, 20000)
                }, 20000)
            }, 20000)
        }, 20000)
    </script>
    <head>
        <title>RullerJS Test</title>
    </head>
    <body>
        <h3>RullerJS Demo</h3>
        <h4>Current ruller output</h4>
        <h5 id="status"></h5>
    </body>
</html>
